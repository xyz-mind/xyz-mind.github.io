---
title: pd.read_csv()详解
description: >-
  pd.read_csv()详解。
author: 刘十五
date: 2025-03-12 12:40:00 +0800
categories: [Blogging, Tutorial]
tags: [Python笔记]
pin: true
media_subpath: '/posts/20250312'
---
`pd.read_csv()` 是 pandas 库中用于读取 CSV 文件的函数，功能强大且参数丰富。以下是其常用参数及使用场景的详解：

---

### **基本参数**

1. **`filepath_or_buffer`**

  - **作用**：文件路径（字符串）或文件对象（如 URL、文件句柄）。

  - **示例**：`pd.read_csv('data.csv')`

2. **`sep` / `delimiter`**

  - **作用**：指定分隔符，默认为逗号 `,`。

  - **示例**：读取制表符分隔文件：`sep='\t'`

3. **`header`**

  - **作用**：指定列名所在行号。默认 `header=0`（第一行），若无列名则设为 `None`。

  - **示例**：`header=None` 表示无标题行，需配合 `names` 参数手动指定列名。

4. **`names`**

  - **作用**：自定义列名列表。

  - **示例**：`names=['列1', '列2', '列3']`

5. **`index_col`**

  - **作用**：指定索引列，支持单列或多列。

  - **示例**：`index_col=0`（第一列为索引）或 `index_col=[0,1]`（多层索引）。

---

### **数据选择**

6. **`usecols`**

  - **作用**：选择读取的列，支持列名列表或列位置列表。

  - **示例**：`usecols=[0, 2]` 或 `usecols=['列A', '列C']`

7. **`skiprows`**

  - **作用**：跳过指定行（如注释行或无效数据）。

  - **示例**：`skiprows=[1,3]` 跳过第 2 和 4 行。

8. **`nrows`**

  - **作用**：仅读取前 `n` 行数据，适合快速查看文件结构。

  - **示例**：`nrows=100` 读取前 100 行。

---

### **数据类型处理**

9. **`dtype`**

  - **作用**：指定列的数据类型，避免自动推断错误。

  - **示例**：`dtype={'年龄': 'int32', '价格': 'float64'}`

10. **`parse_dates`**

  - **作用**：解析日期列，支持列名或列位置组合。

  - **示例**：

    - `parse_dates=['日期']` 解析单列为日期。

    - `parse_dates={'日期': [1,2,3]}` 合并第 2、3、4 列为日期。

11. **`converters`**

  - **作用**：对列应用自定义函数处理数据。

  - **示例**：`converters={'价格': lambda x: x.strip('$')}` 去除美元符号。

---

### **缺失值与编码**

12. **`na_values`**

  - **作用**：定义缺失值标识符（如 `'NA'`、`'N/A'`）。

  - **示例**：`na_values=['NULL', 'NaN', '']`

13. **`encoding`**

  - **作用**：指定文件编码，解决中文乱码问题。

  - **示例**：`encoding='gbk'` 或 `encoding='utf-8'`

---

### **高级功能**

14. **`chunksize`**

  - **作用**：分块读取大文件，返回可迭代对象。

  - **示例**：`chunksize=10000` 每次读取 1 万行。

15. **`comment`**

  - **作用**：跳过以指定字符开头的行（如注释）。

  - **示例**：`comment='#'` 忽略以 `#` 开头的行。

16. **`thousands`**

  - **作用**：处理千分位分隔符（如 `1,000`）。

  - **示例**：`thousands=','` 将 `1,000` 解析为 `1000`。

17. **`on_bad_lines`**

  - **作用**：处理错误行（如字段数量不符）。

  - **示例**：`on_bad_lines='skip'` 跳过错误行。

---

### **示例代码**

```python
import pandas as pd

# 读取分号分隔、GBK编码的文件，跳过第3行，合并日期列，指定列类型
df = pd.read_csv(
    'data.csv',
    sep=';',
    encoding='gbk',
    header=0,
    skiprows=[2],
    parse_dates={'日期': [0, 1, 2]},
    dtype={'年龄': 'int'},
    na_values=['N/A']
)
```


---

### **常见问题**

- **乱码**：调整 `encoding` 参数（如 `'gbk'`）。

- **错误分隔符**：检查 `sep` 是否正确。

- **日期解析失败**：用 `parse_dates` 手动指定列。

- **大文件处理**：使用 `chunksize` 分块读取。

通过合理组合参数，可高效应对各类 CSV 文件的读取需求。

